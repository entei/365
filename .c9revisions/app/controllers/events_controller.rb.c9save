{"ts":1380184119518,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"class EventsController < ApplicationController\n  before_action :set_event, only: [:show, :edit, :update, :destroy]\n  before_filter :authenticate_user!\n  before_filter :current_user, only: [:edit]\n  \n  # GET /events/new\n  def new\n    @event = Event.new \n  end\n\n  # POST /events\n  # POST /events.json\n  def create\n    @event = Event.new(event_params)\n    @event.update_attributes(user_id: current_user.id)\n\n    p @event\n    respond_to do |format|\n    if @event.save\n      format.html { redirect_to calendar_path, notice: \"Event was successfully created.\" }\n      format.json { render action: 'show', status: :created, location: @event }\n    else\n      format.html { render action: 'new' }\n      format.json { render json: @event.errors, status: :unprocessable_entity }\n    end\n  end\n  end\n\n  # PATCH/PUT /events/1\n  # PATCH/PUT /events/1.json\n  def update\n    respond_to do |format|\n      if @event.update(user_params)\n        format.html { redirect_to @event, notice: 'Event was successfully updated.' }\n        format.json { head :no_content }\n      else\n        format.html { render action: 'edit' }\n        format.json { render json: @event.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # show event \n  def show\n    @user = current_user\n  end\n  \n  # DELETE /events/1\n  # DELETE /events/1.json\n  def destroy\n    @event.destroy\n    respond_to do |format|\n      format.html { redirect_to calendar_path }\n      format.json { head :no_content }\n    end\n  end\n  \n private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_event\n      # Get only current user events \n      @event = Event.find(params[:id], :conditions => [\"user_id = ?\", current_user.id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def event_params\n      params.require(:event).permit(:name, :start_at, :end_at, :user_id)\n    end\nend\n"]],"start1":0,"start2":0,"length1":0,"length2":1911}]],"length":1911}
{"contributors":[],"silentsave":false,"ts":1380184145192,"patch":[[{"diffs":[[0,":user_id"],[1,", :description, :color"],[0,")\n    en"]],"start1":1889,"start2":1889,"length1":16,"length2":38}]],"length":1933,"saved":false}
{"contributors":[],"silentsave":false,"ts":1380310075981,"patch":[[{"diffs":[[0,"rmat|\n    if"],[1," (@event.end_at >= @event.start_at) &&"],[0," @event.save"]],"start1":439,"start2":439,"length1":24,"length2":62},{"diffs":[[0,"ent.save"],[1," "],[0,"\n      f"]],"start1":493,"start2":493,"length1":16,"length2":17},{"diffs":[[0," }\n    else\n"],[1,"      if(@event.start_at && @event.end_at )\n         @event.errors.add(:start_at, \"date must be less then End date.\") if (@event.start_at >= @event.end_at) \n      end\n"],[0,"      format"]],"start1":671,"start2":671,"length1":24,"length2":191},{"diffs":[[0,"ate("],[-1,"user"],[1,"event"],[0,"_params)"],[1," && (@event.end_at >= @event.start_at)"],[0,"\n   "]],"start1":1106,"start2":1106,"length1":20,"length2":59},{"diffs":[[0,"\n      else\n"],[1,"        if(@event.start_at && @event.end_at )\n            @event.errors.add(:start_at, \"date must be less then End date.\") if (@event.start_at >= @event.end_at) \n        end\n"],[0,"        form"]],"start1":1288,"start2":1288,"length1":24,"length2":198},{"diffs":[[0,"_params\n"],[-1,""],[0,"      pa"]],"start1":2237,"start2":2237,"length1":16,"length2":16},{"diffs":[[0,", :color"],[1,", :important"],[0,")\n    en"]],"start1":2330,"start2":2330,"length1":16,"length2":28}]],"length":2364,"saved":false}
{"contributors":[],"silentsave":false,"ts":1380708714986,"patch":[[{"diffs":[[0,"d)\n\n"],[-1,"    p @event\n"],[0,"    "]],"start1":401,"start2":401,"length1":21,"length2":8},{"diffs":[[0,"|\n    if"],[1," @event.save &&"],[0," (@event"]],"start1":430,"start2":430,"length1":16,"length2":31},{"diffs":[[0,"_at)"],[-1," && @event.save "],[0,"\n   "]],"start1":484,"start2":484,"length1":24,"length2":8},{"diffs":[[0,"\n  end\n  end"],[1,"\n  \n  \n  def edit\n    @start_at = @event.start_at\n    @end_at = @event.end_at\n  end"],[0,"\n\n  # PATCH/"]],"start1":966,"start2":966,"length1":24,"length2":107}]],"length":2433,"saved":false}
{"contributors":[],"silentsave":false,"ts":1380871281182,"patch":[[{"diffs":[[0," before_"],[-1,"filter"],[1,"action"],[0," :authen"]],"start1":116,"start2":116,"length1":22,"length2":22},{"diffs":[[0,"ore_"],[-1,"filter"],[1,"action"],[0," :cu"]],"start1":156,"start2":156,"length1":14,"length2":14},{"diffs":[[0,"\n  \n"],[-1,"  # GET /events/new\n"],[0,"  de"]],"start1":195,"start2":195,"length1":28,"length2":8},{"diffs":[[0,"nd\n\n"],[-1,"  # POST /events\n  # POST /events.json\n"],[0,"  de"]],"start1":236,"start2":236,"length1":47,"length2":8},{"diffs":[[0," end\n  \n"],[-1,"  \n"],[0,"  def ed"]],"start1":915,"start2":915,"length1":19,"length2":16},{"diffs":[[0,"nd\n\n"],[-1,"  # PATCH/PUT /events/1\n  # PATCH/PUT /events/1.json\n"],[0,"  de"]],"start1":997,"start2":997,"length1":61,"length2":8},{"diffs":[[0,"nd\n\n"],[-1,"  # show event \n"],[0,"  de"]],"start1":1577,"start2":1577,"length1":24,"length2":8},{"diffs":[[0,"d\n  "],[-1,"\n  # DELETE /events/1\n  # DELETE /events/1.json"],[0,""],[1,""],[0,"\n  d"]],"start1":1621,"start2":1621,"length1":55,"length2":8}]],"length":2255,"saved":false}
{"ts":1380911061977,"patch":[[{"diffs":[[0,"nt_user\n"],[1,"    @event = Event.find(params[:id])\n"],[0,"  end\n  "]],"start1":1609,"start2":1609,"length1":16,"length2":53}]],"length":2292,"saved":false}
{"ts":1380911445595,"patch":[[{"diffs":[[0,"nt_user\n    "],[1,"#"],[0,"@event = Eve"]],"start1":1609,"start2":1609,"length1":24,"length2":25}]],"length":2293,"saved":false}
{"ts":1380911457940,"patch":[[{"diffs":[[0,"ser\n"],[-1,"    #@event = Event.find(params[:id])\n"],[0,"  en"]],"start1":1613,"start2":1613,"length1":46,"length2":8}]],"length":2255,"saved":false}
{"contributors":[],"silentsave":false,"ts":1381000404567,"patch":[[{"diffs":[[0,"rect_to "],[-1,"@event"],[1,"calendar_path"],[0,", notice"]],"start1":1142,"start2":1142,"length1":22,"length2":29}]],"length":2262,"saved":false}
{"contributors":[],"silentsave":false,"ts":1381067600778,"patch":[[{"diffs":[[0,"event = "],[-1,"Event.new"],[1,"current_user.event.build"],[0,"(event_p"]],"start1":258,"start2":258,"length1":25,"length2":40}]],"length":2277,"saved":false}
{"ts":1381067615052,"patch":[[{"diffs":[[0,"\n   "],[-1," @event.update_attributes(user_id: current_user.id)\n"],[0,"\n   "]],"start1":304,"start2":304,"length1":60,"length2":8}]],"length":2225,"saved":false}
{"ts":1381067680275,"patch":[[{"diffs":[[0,"er.event"],[1,"s"],[0,".build(e"]],"start1":276,"start2":276,"length1":16,"length2":17}]],"length":2226,"saved":false}
{"contributors":[],"silentsave":false,"ts":1381408551862,"patch":[[{"diffs":[[0,"troller\n"],[1,"  before_action :authenticate_user!\n"],[0,"  before"]],"start1":39,"start2":39,"length1":16,"length2":52},{"diffs":[[0,"oy]\n"],[-1,"  before_action :authenticate_user!\n"],[0,"  be"]],"start1":147,"start2":147,"length1":44,"length2":8},{"diffs":[[0,"ent_user"],[1,"#"],[0,", only: "]],"start1":172,"start2":172,"length1":16,"length2":17},{"diffs":[[0,"event = "],[-1,"E"],[1,"current_user.e"],[0,"vent"],[1,"s"],[0,".new \n  "]],"start1":215,"start2":215,"length1":21,"length2":35},{"diffs":[[0,"params)\n"],[-1,"   "],[0,""],[1,""],[0,"\n    res"]],"start1":313,"start2":313,"length1":19,"length2":16},{"diffs":[[0,"do |format|\n"],[1,"    "],[0,"    if @even"]],"start1":337,"start2":337,"length1":24,"length2":28},{"diffs":[[0,"ave "],[-1,"&& (@event.end_at >= @event.start_at)\n"],[1,"\n    "],[0,"    "]],"start1":368,"start2":368,"length1":46,"length2":13},{"diffs":[[0,"eated.\" }\n      "],[1," "],[1,"   "],[0,"format.json { re"]],"start1":458,"start2":458,"length1":32,"length2":36},{"diffs":[[0,"event }\n    "],[1,"    "],[0,"else\n      i"]],"start1":544,"start2":544,"length1":24,"length2":28},{"diffs":[[0,"    "],[-1,"  if(@event.start_at && @event.end_at )\n         @event.errors.add(:start_at, \"date must be less then End date.\") if (@event.start_at >= @event.end_at) \n      end\n"],[0,"    "]],"start1":565,"start2":565,"length1":171,"length2":8},{"diffs":[[0,"on: 'new' }\n"],[1,"    "],[0,"      format"]],"start1":600,"start2":600,"length1":24,"length2":28},{"diffs":[[0,"le_entity }\n"],[1,"        end\n"],[0,"    end\n  en"]],"start1":684,"start2":684,"length1":24,"length2":36},{"diffs":[[0,"  end\n  end\n"],[-1,"  end\n"],[0,"  \n  def edi"]],"start1":710,"start2":710,"length1":30,"length2":24},{"diffs":[[0,"ams)"],[-1," && (@event.end_at >= @event.start_at)"],[0,""],[1,""],[0,"\n   "]],"start1":875,"start2":875,"length1":46,"length2":8},{"diffs":[[0,"lse\n"],[-1,"        if(@event.start_at && @event.end_at )\n            @event.errors.add(:start_at, \"date must be less then End date.\") if (@event.start_at >= @event.end_at) \n        end\n"],[0,"    "]],"start1":1021,"start2":1021,"length1":182,"length2":8},{"diffs":[[0,"how\n    "],[-1,""],[0,""],[1,"#"],[0,"@user = "]],"start1":1185,"start2":1185,"length1":16,"length2":17},{"diffs":[[0,"event = "],[-1,"E"],[1,"current_user.e"],[0,"vent"],[1,"s"],[0,".find(pa"]],"start1":1534,"start2":1534,"length1":21,"length2":35},{"diffs":[[0,":id]"],[-1,", :conditions => [\"user_id = ?\", current_user.id]"],[0,")\n  "]],"start1":1574,"start2":1574,"length1":57,"length2":8}]],"length":1818,"saved":false}
{"contributors":[],"silentsave":false,"ts":1381778848206,"patch":[[{"diffs":[[0,"mportant"],[1,", :guests"],[0,")\n    en"]],"start1":1796,"start2":1796,"length1":16,"length2":25}]],"length":1827,"saved":false}
{"ts":1381778854723,"patch":[[{"diffs":[[0,"tant"],[-1,", :guests"],[0,")\n  "]],"start1":1800,"start2":1800,"length1":17,"length2":8}]],"length":1818,"saved":false}
